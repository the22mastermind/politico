{"version":3,"sources":["../../src/controllers/offices.js"],"names":["exports","createOffice","req","res","validator","validateCreateOffice","body","error","status","json","details","message","newOffice","id","officeModel","length","type","name","push","data","viewAllOffices","viewSpecificOffice","params","Number","isInteger","parseInt","office","find","o"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEA;AACAA,QAAQC,YAAR,GAAuB,gBAAgBC,GAAhB,EAAqBC,GAArB,EAA0B;AAChD;AADgD,6BAE9BC,qBAAUC,oBAAV,CAA+BH,IAAII,IAAnC,CAF8B;AAAA,KAExCC,KAFwC,yBAExCA,KAFwC;;AAGhD,KAAIA,KAAJ,EAAW;AACV,SAAOJ,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC3BD,WAAQ,GADmB;AAE3BD,UAAOA,MAAMG,OAAN,CAAc,CAAd,EAAiBC;AAFG,GAArB,CAAP;AAIA;AACD;AACA,KAAMC,YAAY;AACjBC,MAAIC,kBAAYC,MAAZ,GAAqB,CADR;AAEjBC,QAAMd,IAAII,IAAJ,CAASU,IAFE;AAGjBC,QAAMf,IAAII,IAAJ,CAASW;AAHE,EAAlB;AAKAH,mBAAYI,IAAZ,CAAiBN,SAAjB;AACA,QAAOT,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC3BD,UAAQ,GADmB;AAE3BW,QAAM,CACJ;AACCN,OAAID,UAAUC,EADf;AAECG,SAAMJ,UAAUI,IAFjB;AAGCC,SAAML,UAAUK;AAHjB,GADI;AAFqB,EAArB,CAAP;AAUA,CA1BD;;AA4BA;AACAjB,QAAQoB,cAAR,GAAyB,gBAAgBlB,GAAhB,EAAqBC,GAArB,EAA0B;AAClD,QAAOA,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC3BD,UAAQ,GADmB;AAE3BW,QAAML;AAFqB,EAArB,CAAP;AAIA,CALD;;AAOA;AACAd,QAAQqB,kBAAR,GAA6B,gBAAgBnB,GAAhB,EAAqBC,GAArB,EAA0B;AACtD;AADsD,KAE9CU,EAF8C,GAEvCX,IAAIoB,MAFmC,CAE9CT,EAF8C;;AAGtD,KAAI,CAACU,OAAOC,SAAP,CAAiBC,SAASZ,EAAT,EAAa,EAAb,CAAjB,CAAL,EAAyC;AACxC,SAAOV,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC3BD,WAAQ,GADmB;AAE3BD,UAAUM,EAAV;AAF2B,GAArB,CAAP;AAIA,EALD,MAKO;AACN,MAAMa,SAAS,MAAMZ,kBAAYa,IAAZ,CAAiB;AAAA,UAAKC,EAAEf,EAAF,KAASY,SAASZ,EAAT,EAAa,EAAb,CAAd;AAAA,GAAjB,CAArB;AACA,MAAIa,MAAJ,EAAY;AACX,UAAOvB,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC3BD,YAAQ,GADmB;AAE3BW,UAAMO;AAFqB,IAArB,CAAP;AAIA,GALD,MAKO;AACN,UAAOvB,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC3BD,YAAQ,GADmB;AAE3BD,8BAAwBM,EAAxB;AAF2B,IAArB,CAAP;AAIA;AACD;AACD,CAtBD","file":"offices.js","sourcesContent":["import officeModel from '../models/offices';\nimport validator from '../middlewares/validation';\nimport moment from 'moment';\n\n// create Party\nexports.createOffice = async function (req, res) {\n\t// Joi Validation\n\tconst { error } = validator.validateCreateOffice(req.body);\n\tif (error) {\n\t\treturn res.status(400).json({\n\t\t\tstatus: 400,\n\t\t\terror: error.details[0].message\n\t\t});\n\t}\n\t// Register office\n\tconst newOffice = {\n\t\tid: officeModel.length + 1,\n\t\ttype: req.body.type,\n\t\tname: req.body.name\n\t};\n\tofficeModel.push(newOffice);\n\treturn res.status(201).json({\n\t\tstatus: 201,\n\t\tdata: [\n\t\t  {\n\t\t  \tid: newOffice.id,\n\t\t  \ttype: newOffice.type,\n\t\t  \tname: newOffice.name\n\t\t  }\n\t\t]\n\t});\n};\n\n// view all offices\nexports.viewAllOffices = async function (req, res) {\n\treturn res.status(200).json({\n\t\tstatus: 200,\n\t\tdata: officeModel\n\t});\n};\n\n// view specific office\nexports.viewSpecificOffice = async function (req, res) {\n\t// Check if param is integer\n\tconst { id } = req.params;\n\tif (!Number.isInteger(parseInt(id, 10))) {\n\t\treturn res.status(400).json({\n\t\t\tstatus: 400,\n\t\t\terror: `${id} must be an integer`\n\t\t});\n\t} else {\n\t\tconst office = await officeModel.find(o => o.id === parseInt(id, 10));\n\t\tif (office) {\n\t\t\treturn res.status(200).json({\n\t\t\t\tstatus: 200,\n\t\t\t\tdata: office\n\t\t\t});\n\t\t} else {\n\t\t\treturn res.status(404).json({\n\t\t\t\tstatus: 404,\n\t\t\t\terror: `Office of id: ${id} not found`\n\t\t\t});\n\t\t}\n\t}\n};\n"]}